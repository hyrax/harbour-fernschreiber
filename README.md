# Ферншрайбер
Клиент Telegram для Sailfish OS
[![Ферншрайбер build](https://github.com/Wunderfitz/harbour-fernschreiber/actions/workflows/main.yml/badge.svg)](https://github.com/Wunderfitz/harbour-fernschreiber/actions/workflows/main.yml)
## Авторы
Себастьян Дж. Вольф [sebastian@ygriega.de](mailto:sebastian@ygriega.de) и несколько участников
## Вклады
Fernschreiber не был бы таким, как раньше, если бы все люди не помогали сделать его лучше. Огромное спасибо всем участникам!
### Код (функции, исправления ошибок, оптимизация и т.д.)
- Модель списка чатов, модель чата, уведомления, приемник TDLib, анимированные стикеры, зависимости от проекта, оптимизация qml / c++, чат-фото, TDLibFile, обзоры кода, категории ведения журнала: [Слава Монич](https://github.com/monich)
- Страница с информацией о чате, улучшения производительности страницы чата, поддержка определения местоположения, инициализация приложения / регистрация в Telegram, зависимости от проекта, обработка эмодзи, оптимизация qml / js, действия с несколькими сообщениями, исправления i18n, обработка разрешений в чате, обзоры кода, категории ведения журнала, поддержка ботов, сборка на github: [jgibbon](https://github.com/jgibbon )
- Скопировать сообщение в буфер обмена: [Christian Stemmle](https://github.com/chstem)
- Скрыть кнопку отправки сообщения, если включена функция отправки по вводу, сфокусировать ввод текста при входе в чат: [santhoshmanikandan](https://github.com/santhoshmanikandan)
- Интеграция параметров выхода из системы и sesison на страницу настроек, оптимизация результатов поиска, выделение непрочитанных сообщений: [Питер Дж.](https://github.com/nephros)
- Возможность всегда добавлять последнее сообщение в уведомления: [Йоханнес Бахманн](https://github.com/dscheinah)
- Возможность перехода к цитируемому сообщению, настройки широкоэкранного интерфейса: [Михаил Барашков](https://github.com/mbarashkov)
Этот список может быть неполным. Если я что-то/ кого-то забыл, пожалуйста, дайте мне знать или сделайте пиар, спасибо! :)
### Логотип /иконка
- Автор: [Маттео](https://github.com/iamnomeutente), автор поправок: [Слава Монич](https://github.com/monich)
:
Поиск по проектам

Цветовая схема
Профиль
Настройки
Избранное
Выйти

ахлру
@ahlru
Проекты
Команды
Компании
Реестр контейнеров
Уведомления
Помощь
мбарашков
/
Телеграфъ
 Упоминания и назначения
 Вся активность
 Отменить



 Файлы
 Проблемы 2
 Запросы на слияние
 CI/CD
 Коммиты
 Ветки
 Источник
 Релизы
 Реестр контейнеров и пакетов
 Вики
 Статистика
владелец

телеграфировать
 Клонировать
HTTPS
SSH
https://gitflic.ru/project/mbarashkov/telegraf.git

Михаил Барашков
Слияние ветки 'aurora_folders'
3 недели назад
.github
10 месяцев назад
дб
8 месяцев назад
док
3 года назад
иконки
3 месяца назад
изображения
4 года назад
qml
месяц назад
об/мин
3 месяца назад
источник
25 дней назад
tdlib
10 месяцев назад
переводы
месяц назад
.gitignore
3 месяца назад
.gitmodules
4 года назад
ЛИЦЕНЗИЯ
4 года назад
README.md
10 месяцев назад
org.ygriega.Telewriter.desktop
3 месяца назад
org.ygriega.Fernschreiber.pro
месяц назад
rlottie @7c5b40c
3 года назад
README.md
Телеграф
Клиент Telegram для Sailfish OS

Сборка телетайпа

Авторы
Себастьян Дж. Вольф sebastian@ygriega.de и несколько участников

Вклады
Fernschreiber не был бы тем же без всех людей, которые помогали сделать его лучше. Большое спасибо всем, кто внес вклад!

Код (функции, исправления ошибок, оптимизации и т. д.)
Модель списка чата, модель чата, уведомления, приемник TDLib, анимированные стикеры, зависимости проекта, оптимизация qml/c++, chatPhoto, TDLibFile, обзоры кода, категории журналирования: Слава Монич
Страница информации о чате, улучшения производительности страницы чата, поддержка местоположения, инициализация/регистрация приложения в Telegram, зависимости проекта, обработка эмодзи, оптимизация qml/js, действия с несколькими сообщениями, исправления i18n, обработка разрешений чата, обзоры кода, категории ведения журнала, поддержка ботов, сборка github: jgibbon
Копировать сообщение в буфер обмена: Кристиан Штеммле
Скрыть кнопку отправки сообщения, если включена функция отправки по нажатию клавиши Enter, сосредоточить ввод текста при входе в чат: santhoshmanikandan
Интеграция параметров выхода из системы и сеанса на страницу настроек, оптимизация результатов поиска, выделение непрочитанных разговоров: Питер Г.
Возможность всегда добавлять последнее сообщение в уведомления: Йоханнес Бахманн
Возможность перехода к цитируемому сообщению, широкоэкранные настройки пользовательского интерфейса: Михаил Барашков
Этот список может быть неполным. Если я что-то/кого-то забыл, пожалуйста, дайте мне знать или создайте PR, спасибо! :)

Логотип/Иконка
Дизайн: Маттео , корректировки: Слава Монич
Переводы
Китайский: dashinfantry
Финский: jorm1s
Английский: Патрик Эрвье , Николя Бурдэ
Венгерский: edp17
Английский: Маттео
Польский: atlochowski
Русские: Рустем Абзалов и Слава Монич
Slovak: ограждение
Испанский: carlosgonz
Шведский: Оке Энгельбректсон
Лицензия
Лицензия GNU GPLv3

Строить
Местная сборка
Просто клонируйте этот репозиторий и убедитесь, что все подмодули также импортированы (например, с помощью git submodule update --init). Затем используйте файл проекта harbour-fernschreiber.proдля импорта исходников в вашу SailfishOS IDE. Чтобы собрать и запустить Fernschreiber или приложение, основанное на Fernschreiber, вам нужно создать файл harbour-fernschreiber/src/tdlibsecrets.hи ввести требуемые константы в следующем формате:

#ifndef TDLIBSECRETS_H
#define TDLIBSECRETS_H
const char TDLIB_API_ID[] = "42424242";
const char TDLIB_API_HASH[] = "1234567890abcdef1234567890abcdef";
#endif // TDLIBSECRETS_H
Вы получаете идентификатор и хэш API Telegram сразу после регистрации своего приложения на https://my.telegram.org .

Более того, вам необходимо иметь скомпилированную версию TDLib 1.8.21 или выше в подкаталоге tdlib. Этот подкаталог должен содержать другой подкаталог, который соответствует архитектуре целевого устройства (например, armv7hl, i486). Внутри этого каталога должна быть папка с именем , libкоторая содержит как минимум libtdjson.so. Для armv7hl относительный путь будет, следовательно tdlib/armv7hl/lib, .

Вы можете просто загрузить tdlib.zip из нашей ветки , чтобы использовать точную версию последней официальной версии Fernschreiber. Чтобы использовать ее, вам нужно извлечь ее в локальную tdlib/папку, как описано выше. Если это так, вы закончили и можете скомпилировать Fernschreiber с помощью Sailfish SDK. Если вы хотите собрать TDLib для себя, пожалуйста, продолжайте читать.

Если вы хотите использовать ту же кодовую базу, которая использовалась для компиляции библиотеки, поставляемой с Fernschreiber, пожалуйста, проверьте форк , обязательно используйте ветку fernschreiberи скомпилируйте эти исходники с помощью следующих команд (убедитесь, что у вас запущен движок сборки Sailfish OS):

alias sfdk=~/SailfishOS/bin/sfdk
sfdk config target=SailfishOS-4.4.0.58-armv7hl(это компилирует исходники на SFOS 4.4 и ARM - цель должна быть скорректирована в соответствии с работающим движком SDK и платформой)
mkdir build
cd build
sfdk build-init
sfdk build-shell cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_INSTALL_PREFIX:PATH=../tdlib -DTD_ENABLE_LTO=ON ..(в случае проблем с компиляцией попробуйте снять флаг -DTD_ENABLE_LTO=ON)
sfdk build-shell cmake --build . --target install
Скомпилированную библиотеку вы найдете в каталоге td/tdlib.

Действие Github
Пожалуйста, прочтите раздел «Локальная сборка» в любом случае, чтобы понять, что происходит, прежде чем продолжить. Если вы хотите автоматически собрать свой форк на Github, вам все равно нужно будет получить идентификатор и хэш API Telegram. Затем они добавляются как секреты проекта с именами TDLIB_API_IDи TDLIB_API_HASH.

По умолчанию будут построены только коммиты в ветку master. Вы можете изменить это для своего форка , но, пожалуйста, не создавайте запрос на извлечение в официальный репозиторий, изменяющий действие github, без предварительной консультации с участниками Fernschreiber .

Если вы нажмете тег, содержащий букву «v» (например, «v0.99.3»), будет создан релиз github, позволяющий легко загрузить полученные rpm. Если тег называется, например, «pre-0.99.3», полученный релиз будет помечен как предварительный релиз для целей тестирования.

Отлаживать
Fernschreiber выводит только несколько сообщений TDLib по умолчанию. Чтобы получить собственные сообщения журнала отладки, вы можете либо запустить отладочную сборку, чтобы увидеть их все, либо использовать переменную окружения, QT_LOGGING_RULESчтобы указать/отфильтровать, какие сообщения вы хотите видеть.

Запустите, QT_LOGGING_RULES="fernschreiber.*=true" harbour-fernschreiberчтобы увидеть все сообщения или замените на *определенные категории журналирования. Вы найдете категорию журналирования внутри соответствующего .cppфайла для использования на бэкэнде или можете использовать JSдля просмотра только сообщений на фронтэнде.

Вы можете добавить &> fernschreiber.logкоманду для создания текстового файла, содержащего отладочные сообщения.

Пожалуйста, имейте в виду, что сообщения отладки, скорее всего, будут включать личную информацию, включая (но не ограничиваясь) содержимое чата и идентификаторы/имена вас и всех ваших партнеров по чату. Не делитесь этим публично и, по своему усмотрению, попробуйте удалить личную информацию даже из тех частей, которыми вы делитесь с доверенным лицом.

Способствовать
Если вы хотите внести исправления ошибок, улучшения, новые функции и т. д., пожалуйста, создайте запрос на извлечение (PR). PR всегда приветствуются и будут рассмотрены как можно скорее, но это может занять некоторое время. :)

Кредиты
В этом проекте используются

Библиотека базы данных Telegram (TDLib) - доступна на GitHub.com . Спасибо за предоставление ее на условиях Boost Software License 1.0! Подробности о лицензии TDLib в ее файле лицензии .
Анализ и оформление эмодзи от Twitter Emoji (Twemoji) , авторские права 2018 Twitter, Inc и других участников, Код лицензирован по лицензии MIT , Графика лицензирована по лицензии CC-BY 4.0
Анализ и анимация анимированных наклеек от rlottie , авторские права 2020 Samsung Electronics Co., Ltd. и других участников , код лицензирован по лицензии MIT , некоторые компоненты rlottie лицензированы по другим лицензиям .
Обратное геокодирование для прикрепленных данных о местоположении с помощью OpenStreetMap Nominatim .
Спасибо разработчикам использованных компонентов и — еще раз — всем участникам Fernschreiber!
